# Set QT scale factor for Xfce 
#  Also set extra environment variables to only pass to Xfce environment
# /etc/X11/Xsession.d/56xfce4-qtconfig
#
BASESTARTUP=$(basename "$STARTUP" | cut -d\  -f1)
if [ "$BASESTARTUP" = x-session-manager ]; then
    BASESTARTUP=$(basename $(readlink /etc/alternatives/x-session-manager))
fi
case "$BASESTARTUP" in
  xfce4-session|startxfce4)
      #set environment variables to follow user chosen platform
      #put whatever environment variable you need in $HOME/.config/MX-Linux/qt_plugin.conf 
      #in standard bash format, ie:  export VARIABLE=value
      file="$HOME/.config/MX-Linux/xfce-environment-variables.conf"
      if [ -e "$file" ]; then
		source "$file"
	  fi
      if command -v xfconf-query >/dev/null; then
         export QT_SCALE_FACTOR=$(xfconf-query -c xsettings -p /Gdk/WindowScalingFactor 2>/dev/null)
         [ -z "${QT_SCALE_FACTOR}" ] && unset QT_SCALE_FACTOR
      fi
      ;;
esac
