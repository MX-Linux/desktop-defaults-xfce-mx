#!/bin/bash

#correct single-workspace-number
#only do this once
#xfconfd must be running


if [ -e "$HOME/.config/xfce4/single-workspace-number-fix" ]; then
	exit 0
else
 	touch "$HOME/.config/xfce4/single-workspace-number-fix"	
	until pgrep xfconfd; do
		sleep 1
	done
	#fix single-workspace-number
	if [ "$(xfconf-query -c xfce4-desktop -p /backdrop/single-workspace-number)" = "-1" ]; then 
		xfconf-query -c xfce4-desktop -p /backdrop/single-workspace-number -s 1
	fi
	if [ -z "$(xfconf-query -c xfce4-desktop --list |grep single-workspace-number)" ]; then 
		xfconf-query -c xfce4-desktop -p /backdrop/single-workspace-number --set 1 --type int --create
	fi
	#fix color style as well
	for PROP in $(xfconf-query -c xfce4-desktop -p /backdrop -l | grep image-style); do 
		xfconf-query -c xfce4-desktop -p ${PROP/%image-style/color-style} --set 0 --type int --create
	done
fi


