#!/bin/bash

#correct single-workspace-number
#only do this once
#xfconfd must be running


if [ -e "$HOME/.config/xfce4/single-workspace-number-fix" ]; then
	exit 0
else
 	touch "$HOME/.config/xfce4/single-workspace-number-fix"	
	until pgrep xfconfd; do
		sleep 1
	done
	PROP=/backdrop/single-workspace-number
	SET="--create --type int --set"
	if ! xfconf-query -c xfce4-desktop -p $PROP >/dev/null 2>&1 ||
   		[ "$(xfconf-query -c xfce4-desktop -p $PROP)" = "-1" ]; then 
		xfconf-query -c xfce4-desktop -p $PROP $SET 1 
	fi

	for PROP in $(xfconf-query -c xfce4-desktop -p /backdrop -l | grep image-style); 
	do 
   		STYLE=${PROP/%image-style/color-style} 
   		CMD="xfconf-query -c xfce4-desktop -p ${STYLE}"; 
   		$CMD >/dev/null 2>&1 || $CMD $SET 0;  
   	done
fi


